<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:c="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html">

<h:head>
	<title>#{applicationBean.siteTitle}</title>
	<link href="./resources/css/style.css" rel="stylesheet" type="text/css" />
	<script type="text/javascript" src="./resources/js/script.js"></script>
</h:head>
<h:body>
	<h:panelGroup id="contentAll" styleClass="main" layout="block">
		<h:panelGroup id="loginInfo" class="userInfo">
		  <h:panelGroup rendered="#{applicationBean.currentUser == null}">
		    <span onclick="app.openLogInDialog()">login</span>
		  </h:panelGroup>
		  <h:panelGroup rendered="#{applicationBean.currentUser != null}">
        #{applicationBean.currentUser.firstName} #{applicationBean.currentUser.name} 
      </h:panelGroup>
		</h:panelGroup>
		<h1>Pizza Bestellservice Eberlein/Ruch</h1>
		<h:panelGroup styleClass="navigation" layout="block"
			rendered="#{applicationBean.showNav()}">
			<h:panelGroup styleClass="navigationBox#{applicationBean.chkAct(2)}"
				layout="block">Pizza wählen</h:panelGroup>
			<h:panelGroup styleClass="navigationBox#{applicationBean.chkAct(3)}"
				layout="block">Übersicht und Extras</h:panelGroup>
			<h:panelGroup styleClass="navigationBox#{applicationBean.chkAct(4)}"
				layout="block">Persönliche Daten</h:panelGroup>
			<h:panelGroup styleClass="navigationBox#{applicationBean.chkAct(5)}"
				layout="block">Abschluss</h:panelGroup>
			<div class="clear"></div>
		</h:panelGroup>
		<h:panelGroup styleClass="content" layout="block">
			<h:panelGroup rendered="#{applicationBean.site.getSite() == 1}">
				<ui:include id="homeInclude" src="includes/home.xhtml"></ui:include>
			</h:panelGroup>
			<h:panelGroup rendered="#{applicationBean.site.getSite() == 2}">
				<ui:include id="pizzaListInclude" src="includes/pizzalist.xhtml"></ui:include>
			</h:panelGroup>
		</h:panelGroup>
	</h:panelGroup>


	<h:panelGroup styleClass="dialog" layout="block" id="logInDialog">
		<div class="dialogWindow">
			<h:form>
				<h2>Login</h2>
	       Username:<br />
				<h:inputText id="userName" styleClass="input" name="user" value="#{userBean.userInput}"></h:inputText>
				<br />
	       Password:<br />
				<h:inputSecret id="userPassword" styleClass="input" name="password" value="#{userBean.passwordInput}"></h:inputSecret>
				<br />
				<button class="button" onclick="app.closeDialog();">abbrechen</button>
				<h:commandButton id="loginButton" styleClass="button" action="#{userBean.login()}"
					value="login" onclick="app.closeDialog();">
					<c:ajax id="login" render=":loginInfo"></c:ajax>
				</h:commandButton>
				
			</h:form>
		</div>
	</h:panelGroup>
</h:body>
</html>